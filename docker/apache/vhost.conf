<VirtualHost *:80>
    ServerName billing.maroon-net.com
    ServerAlias www.billing.maroon-net.com
    DocumentRoot /usr/local/apache2/htdocs
    
    # Redirect to HTTPS
    RewriteEngine On
    RewriteCond %{HTTPS} off
    RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]
</VirtualHost>

<VirtualHost *:443>
    ServerName billing.maroon-net.com
    ServerAlias www.billing.maroon-net.com
    
    SSLEngine on
    SSLCertificateFile /usr/local/apache2/conf/ssl/certificate.crt
    SSLCertificateKeyFile /usr/local/apache2/conf/ssl/private.key
    SSLCertificateChainFile /usr/local/apache2/conf/ssl/ca_bundle.crt
    
    # Proxy to Frontend
    ProxyPass / http://frontend:3000/
    ProxyPassReverse / http://frontend:3000/
    
    # Proxy to Backend API
    ProxyPass /api http://backend:9000/api
    ProxyPassReverse /api http://backend:9000/api
    
    # Logging
    ErrorLog /usr/local/apache2/logs/error.log
    CustomLog /usr/local/apache2/logs/access.log combined
    
    # Security headers
    Header always set X-Content-Type-Options "nosniff"
    Header always set X-Frame-Options "SAMEORIGIN"
    Header always set X-XSS-Protection "1; mode=block"
    
</VirtualHost>